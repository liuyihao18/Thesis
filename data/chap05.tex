% !TeX root = ../thuthesis-example.tex

\chapter{实验结果分析}

本章将对远距离多目标运动特征感知系统进行实验验证与性能分析。
实验主要包含三部分，分别为模块性能测试、室外实验以及室内实验。
在每部分实验中，将介绍实验环境与设置，并对实验结果进行分析。

\section{模块性能测试}

该部分实验旨在测试系统各模块的性能表现，包括信号提取模块、偏移消除模块和目标感知模块等，以验证本文提出方法的有效性。
最后使用定向天线进行端到端实验，证明系统在实际应用中的可行性。

\subsection{改进汉明窗}

本小节仿真测试了改进汉明窗在缓解远近效应中的性能表现。
仿真程序使用MATLAB编写，模拟了极端场景中的远近效应对信号处理的影响。
在这个场景中，存在一个近距离标签和一个远距离标签。
近距离标签信号的振幅为1，频率为10Hz，而远距离标签信号的振幅为0.01，频率为14Hz。
也就是说，近距离标签信号的强度是远距离标签信号强度的10000倍（40dB）。
标签信号长度为1s，满足正交性约束$\left|f_2 - f_1\right|T \gg 1$，理论上可以区分出两个标签信号。
然而，由于两个标签信号强度差异过大，近距离标签信号的旁瓣掩盖了远距离标签信号的主瓣。
图~\ref{fig:window-result}~展示了对混合信号使用改进汉明窗后的频谱结果，此时可以明确地区分出两个信号。

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.66\linewidth]{chap05/window_result.pdf}
    \caption{不同加窗方法下的频谱结果比较}
    \label{fig:window-result}
\end{figure}

\subsection{收发端相位校正}

本小节
%\footnote{收发端相位校正和标签频率漂移消除方法二者缺一不可，因此在测试收发端相位校正方法的时候，使用了标签频率漂移消除方法。}
通过实验测试了收发端相位校正方法在消除载波频率偏移（CFO）、采样时间偏移（STO）和采样频率偏移（SFO）中的性能表现。
本文提出通过激励信号与反向散射信号之间的内在联系来消除这些偏移。
实验使用软件定义无线电设备HackRF One作为发送端和接收端，实验环境为室内实验环境，发送端与接收端之间的距离约1米，频移标签位于发送端与接收端之间，并保持静止状态。
在该实验里，收发端采样率为1MHz，中心频率为915MHz，基带啁啾信号带宽为100KHz，长度为20ms，频移标签频率约253KHz\footnote{绘图时为了更清晰地展示结果，对部分相位、幅度和频率数据进行了降采样。}。

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.66\linewidth]{chap05/cfo_compensation.pdf}
    \caption{收发端相位校正实验结果}
    \label{fig:cfo-compensation}
\end{figure}

为了更好地展示收发端相位校正方法的效果，本文将其与传统的基于频域峰值检测的CFO估计补偿方法~\cite{jiang2021long}进行了对比。
实验结果如图~\ref{fig:cfo-compensation}~所示。
图中橙色曲线是传统方法的结果，而蓝色曲线是本文提出方法的结果。
可以看到，传统方法由于CFO的估计精度有限且没有考虑STO和SFO的影响，导致频率估计结果存在较大偏差。
而本文提出的方法通过信号相除有效地消除了CFO、STO和SFO的影响，残余相位仅剩约0.01rad，几乎不会对后续的目标感知结果产生影响。

\subsection{标签频率漂移消除}

本小节
%\footnote{收发端相位校正和标签频率漂移消除方法二者缺一不可，因此在测试标签频率漂移消除方法的时候，使用了收发端相位校正方法。}
通过实验测试了标签频率漂移消除方法在修正由标签频率漂移引起的相位误差中的性能表现。
本文提出利用反向散射信号双边带的信息，结合标签调制的基本特性来修正频率漂移误差。
实验设置与上一小节一致，发送端和接收端使用HackRF One软件定义无线电设备，频移标签保持静止状态。

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.66\linewidth]{chap05/tag_freq.pdf}
    \caption{标签双边带信号频率测量结果}
    \label{fig:tag-freq}
\end{figure}

首先，本小节验证了标签调制的基本特性——双边带信号频率（相位）变化方向相反——是否成立。
图~\ref{fig:tag-freq}~展示了标签双边带信号的频率测量结果，可以看到，双边带信号的频率变化方向确实是相反的。
这证明了标签频率漂移消除方法的基本假设是成立的，从而本文提出的利用标签信号双边带的信息来修正相位偏移的方法是可行的。
图中双边带信号频率对称中心不是零点是由于实验中收发端存在载波频率偏移所致。

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.66\linewidth]{chap05/tag_drift.pdf}
    \caption{标签频率漂移消除实验结果}
    \label{fig:tag-drift}
\end{figure}

图~\ref{fig:tag-drift}~展示了标签频率漂移消除实验的结果。
为了让读者有更直观的理解，本文将其与朴素的基于标签频率估计的相位补偿方法进行了对比。
图中橙色曲线是朴素方法得到的结果，而蓝色曲线是本文提出方法得到的结果。
可以看到，利用朴素方法补偿的信号相位很快就产生了较大偏移，使得感知完全无法进行。
而本文提出的方法有效地解决了标签频率漂移问题，补偿后信号相位几乎保持不变。
值得注意的是，由于标签成本低，标签频率漂移对相位的影响远超上一小节的收发端频率偏移对相位的影响，因此标签频率漂移消除方法在实际应用中尤为重要。

\subsection{联合估计算法}

本小节通过实验测试了联合估计算法在目标运动频率估计中的效果。
实验设置与前两小节类似，发送端和接收端使用HackRF One软件定义无线电设备，但频移标签放置于电动导轨上控制其进行往复运动。
由于这个实验场景位于拥挤的室内办公室，多径效应将严重扭曲标签信号的相位和幅度，从而影响频率估计的准确性。

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.66\linewidth]{chap05/phase_amplitude.pdf}
    \caption{信号相位与幅度}
    \label{fig:phase-amplitude}
\end{figure}

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.66\linewidth]{chap05/joint_estimation.pdf}
    \caption{联合估计算法实验结果}
    \label{fig:joint-estimation}
\end{figure}

图~\ref{fig:phase-amplitude}~展示了信号相位与幅度的变化情况，而图~\ref{fig:joint-estimation}~展示了联合估计算法的结果。
从图~\ref{fig:phase-amplitude}~中可以看到，由于多径效应的存在，信号相位和幅度均出现了不可预知的变化，使得频率估计出现偏差。
而联合估计算法成功地在损失函数中找到了一个全局最小值，得到了准确的标签运动频率。

\subsection{实时性}

本小节测试了系统的实时性能，验证了系统在实际应用中的可行性。
该实验使用标准的LoRa参数设置，发送端和接收端使用HackRF One软件定义无线电设备，频移标签保持静止状态。
发送端持续发送5000个啁啾符号，每个啁啾符号长度为8.192ms，总共持续约40秒的时间。
原型系统在一台配备AMD 3700X的处理器和32GB内存的计算机上运行，各模块的处理时长和理论复杂度如表~\ref{tab:time-consumption}~所示。

\begin{table}[htbp]
    \begin{center}
        \caption{系统各模块的时间消耗和理论复杂度\label{tab:time-consumption}}
        \label{tab1}
        \begin{tabular}{| c | c | c |}
            \hline
            模块       & 时间消耗                       (s) & 复杂度                 \\
            \hline
            信号解调能量集中 & $0.11$
                     & $O(NL\log{L})$                                       \\
            \hline
            改进汉明窗    & $\approx 0$                    & $O(NL)$             \\
            \hline
            傅里叶变换    & $29.61$                        & $O(NF\log{F})$      \\
            \hline
            收发端相位校正  & $\approx 0$
                     & $O(N)$                                               \\
            \hline
            标签频率漂移消除 & $\approx 0  $                  & $O(N)$              \\
            \hline
            联合估计算法   & $0.10$                         & $O(N|\mathcal{F}|)$ \\
            \hline
        \end{tabular}
    \end{center}
\end{table}

其中，$L=8192$和$N=5000$代表了啁啾符号的采样点数和符号数量，$F \approx 10L = 100000$代表了傅里叶变换的点数，$|\mathcal{F}|=1000$代表了联合估计算法中频率搜索空间的大小。
从表~\ref{tab:time-consumption}~中可以看到，系统在处理5000个符号时总共花费了约30秒的时间，低于发送端发送数据所需的40秒时间，并且主要时间花费在于不可避免的傅里叶变换操作上。
因此，本文提出的各算法模块均满足实时处理的要求。

\subsection{端到端实验}

为了验证系统在实际应用中的可行性，本小节进行了端到端实验。
实验使用USRP N210软件定义无线电作为发送端和接收端，收发端放置于邻近的位置，频移标签放置在距离收发端约3米的位置。
实验环境为实验室走廊，并且收发端和标签均使用定向天线以增强信号强度并减少多径效应的影响。
值得注意的是，只有当收发端放置于一起，且收发端和标签之间均使用定向天线来抑制多径效应时，感知信号的相位才能准确地转化为目标物体的运动距离。
此时，目标物体的运动距离为信号相位变化对应距离变化的一半。

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.33\linewidth]{chap05/tag_direction.png}
    \caption{端到端实验中的标签放置方式}
    \label{fig:tag-direction}
\end{figure}

如图~\ref{fig:tag-direction}~所示，在实验过程中，频移标签连接在一个定向天线上，而定向天线与一个电动推杆连接，电动推杆推动定向天线进行幅度为15cm的往复运动。
类似的定向天线也连接在收发端上，保持静止并与标签连接的天线相对。
此时得到的信号相位与幅度变化如图~\ref{fig:pa-phase-amplitude}~所示。
从图中可以看到，信号相位的变化范围为-2.44弧度到3.05弧度，差值约5.49弧度，对应的标签运动距离变化约为$\frac{1}{2} \times \frac{5.49}{2\pi} \times \frac{3 \times 10^8}{915 \times 10^6} \approx 14.3\text{cm}$，与标签实际运动距离15cm非常接近，考虑到一些几何上的误差，实验结果基本与理论预期相符。
而信号幅度与信号相位的变化模式一致，说明了本文提出的联合估计算法的合理性。

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.66\linewidth]{chap05/pa_phase_amplitude.pdf}
    \caption{端到端实验中的标签信号相位与幅度}
    \label{fig:pa-phase-amplitude}
\end{figure}

值得一提的是，比较图~\ref{fig:phase-amplitude}~和图~\ref{fig:pa-phase-amplitude}~中的信号相位与幅度，可以发现多径效应对信号的影响相当严重。
因此，在多径丰富的环境中，本文提出的联合估计算法将发挥重要作用。
总体而言，该端到端实验验证了本文提出的远距离多目标运动特征感知系统在实际应用中的可行性。
在接下来的实验中，将进一步评估系统在复杂环境中的性能表现。

\section{室外实验}

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.95\linewidth]{chap05/outdoor_scenario.pdf}
    \caption{室外实验场景}
    \label{fig:outdoor-scenario}
\end{figure}

本实验场景位于室外校园道路上，如图~\ref{fig:outdoor-scenario}~所示。
室外校园道路环境相对开阔，具有较少的多径效应影响，但因来往行人和车辆较多，环境更为复杂。
该实验旨在测试系统在现实环境中的远距离多目标感知性能，包括不同收发端距离、不同标签距离、不同目标运动形式、不同干扰强度等对感知精度的影响，以验证系统在实际应用中的可行性。

\subsection{实验设置}

在本实验中，发送端使用商用LoRa节点，接收端使用USRP N210软件定义无线电设备，收发端与频移标签均使用3.5dBi增益的全向天线。
收发端工作于433MHz频段，接收端采样率设置为1MHz，基带啁啾信号扩频因子为12，带宽为500KHz，符号长度为8.192ms，发射功率为28dBm。
标签的频移频率为200KHz到400KHz，放置于电动导轨上，电动导轨长度为30cm，通过烧写Arduino单片机控制95步进电机实现往复运动。
导轨可以精确地控制标签以不同频率和幅度进行运动，从而模拟不同目标物体的运动方式。
实验结果将比较仅用相位、仅用幅度以及联合使用相位和幅度三种方法的感知效果。

\subsection{不同收发端距离对感知精度的影响}

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.66\linewidth]{chap05/result/result_errorbar_outdoor_distance.pdf}
    \caption{不同收发端距离对感知精度的影响}
    \label{fig:result-errorbar-outdoor-distance}
\end{figure}

在该实验中，标签放置于距离接收端30cm处以固定幅度2cm和频率0.66Hz进行往复运动。
移动发送端，使其与接收端的距离分别为50m、100m、150m、200m、300m和400m，以测试不同收发端距离对感知精度的影响。
图~\ref{fig:result-errorbar-outdoor-distance}~展示了不同收发端距离下三种方法的感知误差。
可以看到，随着收发端距离的增加，三种方法的感知精度均有所下降。
其中，仅使用相位的感知结果精度下降最为明显，而联合使用相位和幅度的方法表现出最好的感知精度。
这是因为随着距离的增加，信号信噪比降低，导致相位测量误差增大，而幅度信息相对更稳定。
联合估计算法能够有效结合相位和幅度信息，从而提升整体的感知精度，在400m的距离下达到了99.5\%的频率感知精度。
对比目前最好的远距离标签感知工作Palantir~\cite{jiang2021sense}，本文提出的方法在更远的距离下达到了同等的感知精度，这主要源于本文提出的能量集中方法集中了每个啁啾符号的能量。

\subsection{不同标签距离对感知精度的影响}

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.66\linewidth]{chap05/result/result_errorbar_outdoor_tag_distance.pdf}
    \caption{不同标签距离对感知精度的影响}
    \label{fig:result-errorbar-outdoor-tag-distance}
\end{figure}

在该实验中，发送端与接收端放置于相邻位置，标签与收发端的距离分别为0.5m、1m、1.5m、2m、2.5m和3m，并以固定幅度2cm和频率0.66Hz进行往复运动，从而测试不同标签距离对感知精度的影响。
图~\ref{fig:result-errorbar-outdoor-tag-distance}~展示了不同标签距离下三种方法的感知误差。
可以看到，与上一个实验相比，随着标签距离的增加，三种方法的感知精度下降都更为显著。
这主要是由于标签设计与发送端参数的选择，当啁啾信号带宽为500KHz而标签频率偏移在200KHz到400KHz之间时，频谱的部分重叠使得反向散射信号被强激励信号淹没，导致信噪比降低，从而影响感知精度。
如果将啁啾信号的带宽调小并增加啁啾信号的持续时间，感知范围将得到极大提升，后面的室内实验将验证这一点。
值得注意的是，联合使用相位和幅度的方法依然表现出最好的感知精度。

\subsection{不同目标运动形式对感知精度的影响}

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.66\linewidth]{chap05/result/result_errorbar_outdoor_motion.pdf}
    \caption{不同标签运动距离对感知精度的影响}
    \label{fig:result-errorbar-outdoor-motion}
\end{figure}

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.66\linewidth]{chap05/result/result_errorbar_outdoor_speed.pdf}
    \caption{不同标签运动速度对感知精度的影响}
    \label{fig:result-errorbar-outdoor-speed}
\end{figure}

在该实验中，发送端与接收端固定距离为150m，标签放置于距离接收端30cm处以不同运动形式进行运动。
图~\ref{fig:result-errorbar-outdoor-motion}~展示了不同标签运动距离对感知精度的影响，图~\ref{fig:result-errorbar-outdoor-speed}~展示了不同标签运动速度对感知精度的影响。
可以看到，标签运动形式对于感知精度几乎没有影响，在所有情形下，联合估计算法得到的平均频率感知精度均超过99.6\%。
这表明了本文提出的方法在不同目标运动形式下均具有良好的适应性，能够准确地感知目标的运动特征。
值得注意的是，先前工作Palantir~\cite{jiang2021sense}通过相位转换的波形图的峰谷点来估计目标运动频率，这种方法对目标运动形式较为敏感，而本文提出的联合估计算法通过优化损失函数，能够更好地收集一段时间内的目标运动信息，从而提升了对标签不同运动形式的适应性。

\subsection{不同干扰强度对感知精度的影响}

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.66\linewidth]{chap05/result/result_errorbar_outdoor_interference.pdf}
    \caption{不同干扰强度对感知精度的影响}
    \label{fig:result-errorbar-outdoor-interference}
\end{figure}

在该实验中，发送端与接收端固定距离为150m，标签放置于距离接收端30cm处以固定幅度2cm和频率0.66Hz进行往复运动。
由于实验在室外校园道路环境中进行，来往的行人和车辆将对标签信号产生不同程度的干扰。
为了测试不同干扰强度对感知精度的影响，本实验粗略地依据来往的干扰物体数量将干扰强度划分为三个不同级别：弱干扰（干扰物体小于3个）、中等干扰（干扰物体3-5个）和强干扰（干扰物体多于5个）。
图~\ref{fig:result-errorbar-outdoor-interference}~展示了不同干扰强度下三种方法的感知误差。
可以看到，随着干扰强度的增加，三种方法的感知精度均有所下降，但联合估计算法得到的感知精度依然超过99.5\%。
这和~\ref{sec:anti-interference}~节中的抗干扰能力分析结果一致，只要干扰物体离收发端足够远，其影响便有限。
这表明了本文提出的方法在面对复杂环境时具有较强的鲁棒性，能够有效地获取目标运动特征。

\subsection{多标签场景}

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.8\linewidth]{chap05/result/result_multitags_r_err_freq_combine.pdf}
    \caption{多标签场景下的感知精度}
    \label{fig:result-errorbar-outdoor-multitags}
\end{figure}

在该实验中，收发端距离仍然为150m，5个标签放置于距离接收端30cm处以固定幅度和频率进行往复运动，标签频移频率分别为253640Hz、331990Hz、312390Hz、370990Hz和333160Hz。
为了模拟更多标签同时感知的场景，实验收集了7组发送端发送不同但正交啁啾信号时的数据，并将它们叠加在一起。
图~\ref{fig:result-errorbar-outdoor-multitags}~展示了多标签场景下每个标签的感知误差。
可以看到，由于激励啁啾信号相互正交且不同频移标签信号相互正交，本文提出的方法区分出了全部35个标签的感知信号，且平均频率感知准确率超过99.8\%。
不同标签感知准确率的波动可能源于标签反射系数的不同，导致不同标签信号的SNR不同，从而影响感知精度。
值得注意的是，在实验使用的5个标签中，有2个标签的频率间隔仅有1170Hz，虽然这个间隔很小，但是仍然满足了正交性约束$\left|f_2 - f_1\right|T \gg 1$，因此本文提出的方法很好地区分出了这两个标签信号。

\section{室内实验}

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.66\linewidth]{chap05/room.pdf}
    \caption{室内实验场景}
    \label{fig:indoor-room}
\end{figure}

本实验场景位于室内办公室环境中，如图~\ref{fig:indoor-room}~所示。
该实验旨在测试系统能否在复杂多径环境中覆盖整个房间进行多目标感知。
在该实验中，收发端部署在房间的对角线上，距离约6m，频移标签放置于室内不同8个位置，以固定频率和幅度进行往复运动。
与室外实验不同，本实验使用的啁啾信号带宽为125KHz，符号长度为32.125ms，发射功率为20dBm。
更窄的啁啾信号和更长的符号时间能够有效缓解频谱重叠问题，并增加信号能量集中方法可以汇聚的信号能量，从而提升感知范围和精度。

\begin{figure}[htbp]
    \centering
    \includegraphics[width=0.95\linewidth]{chap05/result/result_bar_indoor_room.pdf}
    \caption{室内实验结果}
    \label{fig:result-bar-indoor-room}
\end{figure}

图~\ref{fig:result-bar-indoor-room}~展示了室内实验场景下系统的感知结果。
可以看到，联合估计算法在8个位置均表现出良好的感知精度，频率感知准确率达到99.5\%。
而仅使用相位或幅度信息的方法在某些位置感知精度大幅下降，甚至无法感知到目标。
这主要是由于室内环境中多径效应以不同模式扭曲了信号的相位和幅度信息，导致单一信息源的感知方法失效。
但是通过联合估计算法，能够有效结合相位和幅度信息，从而提升系统整体的感知精度。
总体而言，室内实验验证了本文提出的远距离多目标运动特征感知系统在复杂多径环境中的可行性和有效性。

\section{本章小结}

本章通过实验，验证了远距离多目标运动特征感知系统的性能表现。
首先，通过模块测试，确认了本文提出各种方法的有效性和实时性，以及系统原型的可行性。
随后，通过室外实验，评估了系统在不同收发端距离、标签距离、目标运动形式和干扰强度下的感知精度，说明了本文提出的方法在各种条件下均表现出良好的感知性能。
最后，通过室内实验，展示了系统在复杂多径环境中的应用可行性。
总而言之，能量集中方法和窗函数确保了系统能够从接收信号中提取出微弱的标签反射信号，收发端相位校正和标签频率漂移消除方法有效地修正了各种频率偏移对信号相位的影响，而联合估计算法则通过结合相位和幅度信息，最终提升了系统的目标感知精度。
